<ul>
  <li *ngFor='let goal of goals'>
    <input type="checkbox" [checked]="goal.expand" [(ngModel)]="goal.expand" (change)="goal.expand ? true : false"/>
    <input type="checkbox" [checked]="goal.isCompleted" [(ngModel)]="goal.isCompleted"
      (change)="completeGoal(goal.isCompleted ? true : false, goal)" />
    <select id="priority" [(ngModel)]="goal.priority" name="priority" (change)="changePriority(goal)"
      [value]='goal.priority'>
      <option value="{{i}}" *ngFor="let goal of goals; let i = index">{{i}}</option>
    </select>
    <a href="/goals/{{goal.id}}" [class.completed]="goal.isCompleted" *ngIf="!goal.dueDate;else other_content">
      {{goal.title}} ({{goal.children.length}})
    </a>
    <ng-template #other_content>
      <a href="/goals/{{goal.id}}" [class.completed]="goal.isCompleted">
        {{goal.title}} due: {{goal.dueDate}}
      </a>
    </ng-template>
    <button class="btn btn-link" (click)="addToDaily(goal)" *ngIf="!goal.isDaily;else isDaily">Add to daily</button>
    <ng-template #isDaily>
      <button class="btn btn-link" (click)="addToDaily(goal)">Remove from daily</button>
    </ng-template>
    <div *ngIf='goal.children && goal.expand'>
      <app-goals-list *ngIf='goal.children' [goals]="goal.children" (refreshGoalList)="refreshGoalList($event)">
      </app-goals-list>
    </div>
  </li>
</ul>